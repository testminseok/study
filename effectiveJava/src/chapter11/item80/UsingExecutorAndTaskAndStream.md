# 스레드보다는 실행자, 태스크, 스트림을 애용하라
실행자 서비스의 주요 기능
- 특정 태스크가 완료되기를 기다린다.
- 태스크 모음 중에 하나 혹은 모든 태스크가 완료되기를 기다린다.
- 실행자 서비스가 종료하기를 기다린다(awaitTermination).
- 완료된 태스크들의 결과를 차례로 받는다.(ExecutorCompletionService)
- 태스크를 특정 시간에 혹은 주기적으로 실행하게 한다(ScheduledThreadPoolExecutor)

스레드 풀의 스레드 개수는 고정할 수도 있고 필요에 따라 늘어나거나 줄어들 수도 있다.
실행자 대부분은 java.util.concurrent.Executors 의 정적 팩터리들을 이용해 생성할 수 있다.
평범하지 않은 실행자를 원한다면 ThreadPoolExecutor 를 직접 사용하자.
이 클래스로는 스레드 풀 동작을 결정하는 거의 모든 속성을 설정할 수 있다.

실행자 서비스를 사용하기 까다로운 어플리케이션도 있는데, 
작은 프로그램이나 가벼운 서버라면 Executors.newCachedThreadPool 을 사용하는 것만으로도 충분하다.
특별히 설정할 게 없고 일반적인 용도에 적합하게 동작한다.
하지만 무거운 프로덕션 서버에는 좋지 못하다. CachedThreadPool 은 요청받은 태스크들이 큐에 쌓이지 않고
즉시 스레드에 위임돼 실행된다. 가용한 스레드가 없다면 새로 하나를 생성한다.
서버가 아주 무겁다면 CPU 사용율이 100%로 치닫고, 새로운 태스크가 도착하는 족족 또 다른 스레드를 생성하면서 상황을 악화시킨다.
따라서, 무거운 프로덕션용 서버에서는 스레드 개수를 고정한 Executors.newFixedThreadPool 을 사용하거나 ThreadPoolExecutor 를 직접 사용해야 한다.

태스크에는 두 가지가 있는데 Runnable 과 Callable 이다.
Runnable 은 void 를 반환하고, Callable 은 제네릭을 사용해 반환값의 타입을 지정할 수 있다.
그리고 태스크를 수행하는 일반적인 메커니즘이 바로 실행자 서비스이다.
태스크 수행을 실행자 서비스에 맡기면 원하는 태스크 수행 정책을 선택할 수 있고, 생각이 바뀌면 언제든 변경할 수 있다.
